# 浏览器输入 URL 到页面加载显示完成全过程

1.  **DNS 解析：**

- 用户在浏览器中输入 URL ，浏览器开始解析域名（URL）并查找 DNS 缓存，以查找域名对应的 IP 地址。
- 如果域名对应的 IP 地址未在本地 DNS 缓存中找到，浏览器将查询操作传递给 操作系统 的DNS 解析器 ，操作系统将查询操作传递给本地 域名服务器 。
- 本地 域名服务器 在自己的 DNS 缓存中查找域名对应的 IP 地址，如果找到则返回，否则继续查询更高级别的DNS服务器，直到找到IP地址。

1.  **建立 TCP 连接：**

- 浏览器使用解析后的 IP 地址，尝试与 Web服务器 建立TCP连接。
- 通过TCP三次握手，建立连接，确保浏览器和服务器之间可以互相通信。

1.  **发起 HTTP请求 ：**

- 一旦建立了TCP连接，浏览器通过HTTP协议发送HTTP请求，包含请求的资源、请求头、浏览器类型等等。

1.  **服务器处理请求：**

- 服务器接收到HTTP请求，开始处理请求。
- 服务器可能需要查询数据库，生成动态内容，或者从文件系统中读取静态资源。

1.  **服务器响应：**

- 服务器处理完成后，返回HTTP响应，其中包含HTTP状态码、响应头信息、响应数据等。
- 如果请求资源不存在或发生错误，服务器将返回相应的状态码。

1.  **接收 HTML ：**

- 浏览器接收HTTP响应，并开始解析响应数据，查找 HTML 内容。

1.  **构建 DOM 树：**

- 浏览器解析 HTML 内容，构建 DOM （ 文档对象模型 ）树，表示页面的结构。

1.  **构建CSSOM树：**

- 同时，浏览器开始解析 CSS 样式表，构建CSSOM（CSS对象模型）树，表示页面的样式信息。

1.  **渲染树构建：**

- 浏览器将 DOM 树和CSSOM树结合起来，构建渲染树（Render Tree ），表示页面的可见内容。

1.  **布局和绘制：**

- 浏览器计算渲染树中每个元素的大小和位置，然后进行页面布局（layout）。
- 最后，浏览器绘制页面上的每个元素，呈现给用户。

1.  **交互和 JavaScript ：**

- 如果遇到了 JavaScript 代码，浏览器会执行JavaScript，可以修改 DOM 和CSSOM，以及处理用户交互。

1.  **完成页面加载：**

- 当资源（包括嵌入的资源，样式表、脚本等）加载完成，浏览器会触发 onload 事件，表示页面加载完成。

1.  **页面渲染完成：**

- 用户可以看到页面内容，页面渲染完成。
