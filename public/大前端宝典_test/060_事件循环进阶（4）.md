# 事件循环进阶（4）

```javascript
const promiseA = Promise.resolve('1')  
promiseA.then((res) => {  
console.log('a:', res)  
}).then((res) => {  
console.log('a:', res)  
})  
  
const promiseB = Promise.resolve('2')  
promiseB.then((res) => {  
console.log('b:', res)  
})  
promiseB.then((res) => {  
console.log('b:', res)  
})

```
**解释：**

```javascript
// 第一步  
  
输出：  
  
微任务 = \[  
(res = '1') => {  
console.log('a:', res)  
}).then((res) => {  
console.log('a:', res)  
}),  
  
(res = '2') => {  
console.log('b:', res)  
},  
  
(res = '2') => {  
console.log('b:', res)  
}  
\]  
  
宏任务 = \[\]

```

```javascript
// 第二步  
  
输出：'a:1'  
  
// 处理第一个微任务  
(res = '1') => {  
console.log('a:', res)  
}).then((res) => {  
console.log('a:', res)  
}),  
  
微任务 = \[  
(res = '2') => {  
console.log('b:', res)  
}  
  
(res = '2') => {  
console.log('b:', res)  
}  
  
// 追加一个微任务在队尾  
(res = undefined) => {  
console.log('a:', res)  
}  
\]  
  
宏任务 = \[\]

```

```javascript
// 第三步  
  
输出：'a:1' 'b: 2'  
  
// 处理第一个微任务  
(res = '2') => {  
console.log('b:', res)  
}  
  
微任务 = \[  
(res = '2') => {  
console.log('b:', res)  
}  
  
(res = undefined) => {  
console.log('a:', res)  
}  
\]  
  
宏任务 = \[\]

```

```javascript
// 第四步  
  
输出：'a:1' 'b: 2' 'b: 2'  
  
// 处理第一个微任务  
(res = '2') => {  
console.log('b:', res)  
}  
  
微任务 = \[  
(res = undefined) => {  
console.log('a:', res)  
}  
\]  
  
宏任务 = \[\]

```

```javascript
// 第五步  
  
输出：'a:1' 'b: 2' 'b: 2' 'a: undefined'  
  
// 处理第一个微任务  
(res = undefined) => {  
console.log('a:', res)  
}  
  
微任务 = \[\]  
  
宏任务 = \[\]

```
