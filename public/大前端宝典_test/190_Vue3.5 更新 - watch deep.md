# Vue3.5 更新 - watch deep

- vue3 要深度监听一个对象，只能设置 {deep: true} ，但部分业务场景下，并不需要完全深度监听，业务只会影响对第二或第三层，这种情况下深度监听会性能代价是非常昂贵的。

```javascript
<button @click="handler()">change</button>  
  
import { ref, watch } from 'vue';  
const obj = ref({  
a: {  
b: {  
c: {  
d: 1  
}  
}  
}  
});  
watch(obj, () => {  
console.log('watch obj change');  
}, { deep: true });  
  
const handler = () => {  
obj.value.a.b.c.d = Math.random();  
};

```
- Vue3.5 中 deep 配置可支持传入一个 number 类型，指代只监听到第 n 层。

```javascript
<button @click="handler()">change</button>  
  
import { ref, watch } from 'vue';  
const obj = ref({  
a: {  
b: {  
c: {  
d: 1  
}  
}  
}  
});  
watch(obj, () => {  
console.log('watch obj change');  
}, { deep: 2 });  
  
const handler = () => {  
obj.value.a.b = Math.random();  
};

```
