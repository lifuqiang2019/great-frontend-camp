# 以下两段代码在 vue 中分别渲染多少次？为什么？

```javascript
<template>  
<div>{{rCount}}</div>  
</template>  
<script setup>  
import { ref } from 'vue';  
const count = 0;  
const rCount = ref(count);  
for (let i = 0; i < 5; ++i) {  
setTimeout(() => {  
rCount.value = i;  
}, 0);  
}  
</script>

**答案：** 左边1次，右边5次。

**解释：** 当数据发生变化，会被 Object.defineProperty(vue2) 或 new Proxy(vue3) 监听到，监听到之后会把调用渲染函数，但渲染函数不是立即执行，而是会放到一个微任务队列中 Promise.reslove().then() (vue3) 或 nextTick (vue2) ，等待当前所有同步代码执行完成后，会调用微任务， 一次过更新内容。

**vue2:** vue2/src/core/observer/scheduler.ts -> queueWatcher -> nextTick

**vue3:** vue3/packages/reactivity/src/deferredComputed.ts -> tick

```
