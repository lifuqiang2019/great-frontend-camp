# 前端性能监控指标采集方案

## 面试官提问

"你们线上的性能情况是怎么监控的？有哪些核心指标？具体是怎么采集和上报的？"

## 面试高分回答 (逐字稿)

"做性能优化，不能靠猜，必须要有数据支撑。我在项目中搭建了一套前端性能监控体系。

我们主要关注 Google 提出的 **Web Vitals** 核心指标：
**LCP (最大内容绘制)**：衡量加载速度。
**FID (首次输入延迟)**：衡量交互响应度。
**CLS (累积布局偏移)**：衡量视觉稳定性（页面有没有乱跳）。

具体的采集方案是使用浏览器原生的 **PerformanceObserver API**。我们在页面初始化时注册监听器，捕获这些指标，然后通过 `requestIdleCallback` 在浏览器空闲时上报到日志服务器。我们通常使用 `navigator.sendBeacon` 来上报，确保即使页面关闭数据也能发送出去。有了这些数据，我们就能知道用户端的真实体验到底怎么样了。"