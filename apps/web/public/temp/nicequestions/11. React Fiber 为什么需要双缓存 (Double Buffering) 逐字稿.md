# React Fiber 为什么需要双缓存 (Double Buffering)

## 面试官提问

"React 的 Fiber 架构里有个‘双缓存’的概念，能用通俗的话讲讲它是干嘛的吗？它解决了什么问题？"

## 面试高分回答 (逐字稿)

"React Fiber 的双缓存机制，其实和游戏渲染的原理是一样的。

简单来说，React 在内存里维护了两棵树：
一棵是 **Current Tree**，代表当前屏幕上显示的内容。
另一棵是 **WorkInProgress Tree**，是正在构建的新树。

当状态更新时，React 会在 WorkInProgress Tree 上进行计算 (Diff)，这个过程是可以**中断**的。如果不双缓存，直接在 Current Tree 上改，一旦中断，用户就会看到渲染了一半的残缺页面。

有了双缓存，React 可以在后台悄悄把新树画好，等全部计算完成了，直接把指针从 Current 指向 WorkInProgress，瞬间完成替换。这样既实现了可中断渲染，又保证了用户看到的页面始终是完整的。"