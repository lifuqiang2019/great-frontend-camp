# 事件循环进阶（5）

```xml
<html>  
<head>  
</head>  
<body>  
<script type="text/javascript">  
console.log(1)  
Promise.resolve().then(() => {  
console.log(2);  
});  
setTimeout(() => {  
console.log(3);  
}, 0);  
</script>  
<script type="text/javascript">  
console.log(4);  
</script>  
</body>  
</html>

**答案：** script 代码片段会被浏览器内容作为 task 调度，放入宏任务队列

```

```javascript
输出结果：1 2 4 3

```
- step1：

```javascript
输出：  
  
宏任务队列 = \[{  
console.log(1)  
Promise.resolve().then(() => {  
console.log(2);  
});  
setTimeout(() => {  
console.log(3);  
}, 0);  
}, {  
console.log(4);  
}\]  
  
微任务队列 = \[\]

```
- step2：

```javascript
{  
console.log(1)  
Promise.resolve().then(() => {  
console.log(2);  
});  
setTimeout(() => {  
console.log(3);  
}, 0);  
}  
  
输出：1  
  
宏任务队列 = \[{  
console.log(4);  
}, {  
console.log(3);  
}\]  
  
微任务队列 = \[{  
console.log(2);  
}\]

```
- step3：

```javascript
{  
console.log(2);  
}  
  
输出：1 2  
  
宏任务队列 = \[{  
console.log(4);  
}, {  
console.log(3);  
}\]  
  
微任务队列 = \[\]

```
- step4：

```javascript
{  
console.log(4);  
}  
  
输出：1 2 4  
  
宏任务队列 = \[{  
console.log(3);  
}\]  
  
微任务队列 = \[\]

```
- step5：

```javascript
{  
console.log(3);  
}  
  
输出：1 2 4 3  
  
宏任务队列 = \[\]  
  
微任务队列 = \[\]

```
